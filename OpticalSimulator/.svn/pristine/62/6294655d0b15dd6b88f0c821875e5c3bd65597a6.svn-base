import matplotlib
import matplotlib.pyplot as plt
import matplotlib.ticker as mticker

def readData(stringFile):
	f = open(stringFile, 'r+')
	diff =[]
	for line in f:
		str = line.split('\t')
		osnrASE = float(str[1].replace(',', '.'))
		osnrNLI = float(str[2].replace(',', '.'))
		diff.append(osnrASE - osnrNLI)
	f.close()
	return diff
	
def to_percent(y, position):
	lambda s: 100*s, y
	s = str(100 * y)

    # The percent symbol needs escaping in latex
	if matplotlib.rcParams['text.usetex'] is True:
		return s + r'$\%$'
	else:
		return s + '%'


diff = readData('LI_edfa22_nliEase_-15_par.txt')
plt.hist(diff, 5, alpha=0.75, normed=True, label='-15 dBm/ch', zorder=3)

diff = readData('LI_edfa22_nliEase_-21_par.txt')
plt.hist(diff, 5, alpha=0.75, normed=True, label='-21 dBm/ch', zorder=3)

diff = readData('LI_edfa22_nliEase_-27_par.txt')
plt.hist(diff, 3, alpha=0.75, normed=True, label='-27 dBm/ch', zorder=3)

formatter = mticker.FuncFormatter(to_percent)
plt.gca().yaxis.set_major_formatter(formatter)

plt.xlabel('OSNR decrease (dB)')
plt.title('Histogram of OSNR decrease after considering NLI')
plt.grid(lineStyle='--', zorder=0)
plt.legend(loc='upper right')
#plt.show()
plt.savefig('C:\\Users\\Erick\\workspace\\CognitiveAmplifiersBranch\\FB_results\\osnrDecreaseHist.png', dpi = 300)
